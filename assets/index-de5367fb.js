import{g as L,a as j,s as A,_,r as l,u as I,b as T,j as v,c as D,d as P,e as ce,f as le,h as de,R as ue,T as g,i as M,k as c,l as S,m as w,n as m,o as fe,p as pe,q as h,I as $,L as q,C as ve,B as he,F as W}from"./index-4c408cd6.js";import{u as me,F as ge,a as Ce,b as _e,O as be,T as xe,A as Se,c as we}from"./graphql-22cb00e7.js";function ye(e){return L("MuiCardActions",e)}j("MuiCardActions",["root","spacing"]);const $e=["disableSpacing","className"],Re=e=>{const{classes:t,disableSpacing:n}=e;return P({root:["root",!n&&"spacing"]},ye,t)},Ee=A("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>_({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Me=l.forwardRef(function(t,n){const o=I({props:t,name:"MuiCardActions"}),{disableSpacing:i=!1,className:a}=o,s=T(o,$e),r=_({},o,{disableSpacing:i}),u=Re(r);return v.jsx(Ee,_({className:D(u.root,a),ownerState:r,ref:n},s))}),Le=Me;function je(e){return L("MuiCardContent",e)}j("MuiCardContent",["root"]);const Ae=["className","component"],Ie=e=>{const{classes:t}=e;return P({root:["root"]},je,t)},Te=A("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),De=l.forwardRef(function(t,n){const o=I({props:t,name:"MuiCardContent"}),{className:i,component:a="div"}=o,s=T(o,Ae),r=_({},o,{component:a}),u=Ie(r);return v.jsx(Te,_({as:a,className:D(u.root,i),ownerState:r,ref:n},s))}),Pe=De;function ke(e,t,n,o,i){const[a,s]=l.useState(()=>i&&n?n(e).matches:o?o(e).matches:t);return de(()=>{let r=!0;if(!n)return;const u=n(e),f=()=>{r&&s(u.matches)};return f(),u.addListener(f),()=>{r=!1,u.removeListener(f)}},[e,n]),a}const G=ue["useSyncExternalStore"];function ze(e,t,n,o,i){const a=l.useCallback(()=>t,[t]),s=l.useMemo(()=>{if(i&&n)return()=>n(e).matches;if(o!==null){const{matches:d}=o(e);return()=>d}return a},[a,e,o,i,n]),[r,u]=l.useMemo(()=>{if(n===null)return[a,()=>()=>{}];const d=n(e);return[()=>d.matches,p=>(d.addListener(p),()=>{d.removeListener(p)})]},[a,n,e]);return G(u,r,s)}function Fe(e,t={}){const n=ce(),o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:a=o?window.matchMedia:null,ssrMatchMedia:s=null,noSsr:r=!1}=le({name:"MuiUseMediaQuery",props:t,theme:n});let u=typeof e=="function"?e(n):e;return u=u.replace(/^@media( ?)/m,""),(G!==void 0?ze:ke)(u,i,a,s,r)}function Oe(e){return L("MuiInputAdornment",e)}const Ne=j("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),U=Ne;var B;const Ve=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Ue=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${M(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},Be=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:i,size:a,variant:s}=e,r={root:["root",n&&"disablePointerEvents",i&&`position${M(i)}`,s,o&&"hiddenLabel",a&&`size${M(a)}`]};return P(r,Oe,t)},He=A("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Ue})(({theme:e,ownerState:t})=>_({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${U.positionStart}&:not(.${U.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),Qe=l.forwardRef(function(t,n){const o=I({props:t,name:"MuiInputAdornment"}),{children:i,className:a,component:s="div",disablePointerEvents:r=!1,disableTypography:u=!1,position:f,variant:d}=o,p=T(o,Ve),b=me()||{};let y=d;d&&b.variant,b&&!y&&(y=b.variant);const C=_({},o,{hiddenLabel:b.hiddenLabel,size:b.size,disablePointerEvents:r,position:f,variant:y}),x=Be(C);return v.jsx(ge.Provider,{value:null,children:v.jsx(He,_({as:s,ownerState:C,className:D(x.root,a),ref:n},p,{children:typeof i=="string"&&!u?v.jsx(g,{color:"text.secondary",children:i}):v.jsxs(l.Fragment,{children:[f==="start"?B||(B=v.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})}),Je=Qe,K=l.createContext(""),X=l.createContext(()=>{});function qe(e){const[t,n]=l.useState("");return c(K.Provider,{value:t,children:c(X.Provider,{value:n,children:e.children})})}function We(){return l.useContext(K)}function Ge(){return l.useContext(X)}var k={},Ke=w;Object.defineProperty(k,"__esModule",{value:!0});var Y=k.default=void 0,Xe=Ke(S()),Ye=v,Ze=(0,Xe.default)((0,Ye.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"}),"DeleteRounded");Y=k.default=Ze;var z={},et=w;Object.defineProperty(z,"__esModule",{value:!0});var Z=z.default=void 0,tt=et(S()),nt=v,ot=(0,tt.default)((0,nt.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"EditRounded");Z=z.default=ot;var F={},rt=w;Object.defineProperty(F,"__esModule",{value:!0});var ee=F.default=void 0,at=rt(S()),st=v,it=(0,at.default)((0,st.jsx)("path",{d:"m19.65 9.04-4.84-.42-1.89-4.45c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.73 3.67-3.18c.67-.58.32-1.68-.56-1.75zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarOutlineRounded");ee=F.default=it;var O={},ct=w;Object.defineProperty(O,"__esModule",{value:!0});var te=O.default=void 0,lt=ct(S()),dt=v,ut=(0,lt.default)((0,dt.jsx)("path",{d:"m14.43 10-1.47-4.84c-.29-.95-1.63-.95-1.91 0L9.57 10H5.12c-.97 0-1.37 1.25-.58 1.81l3.64 2.6-1.43 4.61c-.29.93.79 1.68 1.56 1.09l3.69-2.8 3.69 2.81c.77.59 1.85-.16 1.56-1.09l-1.43-4.61 3.64-2.6c.79-.57.39-1.81-.58-1.81h-4.45z"}),"StarRateRounded");te=O.default=ut;globalThis&&globalThis.__awaiter;function ft(e,t){const[n,o]=l.useState(e);return l.useEffect(()=>{const i=setTimeout(()=>o(e),t||500);return()=>{clearTimeout(i)}},[e,t]),n}function pt(e){const t=l.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return ne(()=>{t.current=e},[e]),l.useCallback((...n)=>t.current(...n),[t])}function H(e,t,n,o){const i=l.useRef(t);ne(()=>{i.current=t},[t]),l.useEffect(()=>{var a;const s=(a=n==null?void 0:n.current)!==null&&a!==void 0?a:window;if(!(s&&s.addEventListener))return;const r=u=>i.current(u);return s.addEventListener(e,r,o),()=>{s.removeEventListener(e,r,o)}},[e,n,o])}globalThis&&globalThis.__awaiter;const ne=typeof window<"u"?l.useLayoutEffect:l.useEffect;function vt(e,t){const n=l.useCallback(()=>{if(typeof window>"u")return t;try{const r=window.localStorage.getItem(e);return r?ht(r):t}catch(r){return console.warn(`Error reading localStorage key “${e}”:`,r),t}},[t,e]),[o,i]=l.useState(n),a=pt(r=>{typeof window>"u"&&console.warn(`Tried setting localStorage key “${e}” even though environment is not a client`);try{const u=r instanceof Function?r(o):r;window.localStorage.setItem(e,JSON.stringify(u)),i(u),window.dispatchEvent(new Event("local-storage"))}catch(u){console.warn(`Error setting localStorage key “${e}”:`,u)}});l.useEffect(()=>{i(n())},[]);const s=l.useCallback(r=>{r!=null&&r.key&&r.key!==e||i(n())},[e,n]);return H("storage",s),H("local-storage",s),[o,a]}function ht(e){try{return e==="undefined"?void 0:JSON.parse(e??"")}catch{console.log("parsing error on",{value:e});return}}const oe=l.createContext({values:[],set:new Set}),re=l.createContext({add(){},remove(){}});function mt(e){const[t,n]=vt("favorite",[]),o=l.useMemo(()=>({values:t,set:new Set(t)}),[t]),i=l.useMemo(()=>({add(a){n(s=>s.concat(a))},remove(a){n(s=>s.filter(r=>r!==a))}}),[]);return c(oe.Provider,{value:o,children:c(re.Provider,{value:i,children:e.children})})}function ae(){return l.useContext(oe)}function gt(){return l.useContext(re)}function Ct(e){const{contact:t}=e,n=`${t.first_name} ${t.last_name}`,o=fe(),a=ae().set.has(t.id),{showConfirmationModal:s,closeModal:r}=pe(),[u,{loading:f}]=Ce({variables:{id:t.id},update(C,{data:x}){x!=null&&x.delete_contact_by_pk&&(C.evict({id:C.identify(x.delete_contact_by_pk)}),C.gc())}});function d(){s({content:"Are you sure want to delete the contact?",onConfirm:()=>{u(),r()}})}const p=gt();function b(){p.add(t.id),o(`${n} is added to favorite`)}function y(){p.remove(t.id),o(`${n} is removed from favorite`)}return h(ve,{css:Q.root,children:[h(Pe,{children:[c(g,{fontWeight:700,children:n}),c(g,{variant:"body2",children:t.phones.map(C=>C.number).join(", ")})]}),h(Le,{css:Q.actions,children:[!a&&c($,{"aria-label":`Add ${n} to favorite`,color:"warning",disabled:f,onClick:b,children:c(ee,{})}),a&&c($,{"aria-label":`Remove ${n} from favorite`,color:"warning",disabled:f,onClick:y,children:c(te,{})}),c($,{component:q,to:`/edit/${t.id}`,"aria-label":`Edit ${n}`,color:"primary",disabled:f,children:c(Z,{})}),c($,{"aria-label":`Delete ${n}`,color:"error",disabled:f,onClick:()=>d(),children:c(Y,{})})]})]})}const Q={root:m({display:"flex",justifyContent:"space-between"}),actions:m({justifyContent:"flex-end"})},J=10;function E(e){const{title:t}=e;return h("div",{css:R.root,children:[c(g,{variant:"h6",gutterBottom:!0,children:t}),c(_t,{...e})]})}function _t(e){const{variables:t}=e,[n,o]=l.useState(!1),i=Fe("(min-width:900px)"),{loading:a,error:s,data:r,fetchMore:u}=_e({variables:{limit:J,order_by:{first_name:be.Asc},...t}});async function f(){if(!r)return;const d=await u({variables:{offset:r.contact.length}});o(d.data.contact.length<J)}return a?c(g,{children:"Loading..."}):s?c(g,{children:"Something went wrong..."}):!r||!r.contact.length?c(g,{children:"No data"}):h(W,{children:[c("div",{css:[i?R.desktopList:R.list],children:r.contact.map(d=>c(Ct,{contact:d},d.id))}),!n&&c(he,{variant:"text",css:R.button,onClick:f,children:"Load more..."})]})}const R={root:m({display:"flex",flexDirection:"column"}),list:m({display:"flex",flexDirection:"column",gap:12}),desktopList:m({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12}),button:m({alignSelf:"center",marginTop:12})};function bt(){const e=We(),t=ae();return h("div",{css:xt.root,children:[!!e&&c(E,{title:"Search",variables:{where:{_or:[{first_name:{_ilike:`%${e}%`}},{last_name:{_ilike:`%${e}%`}}]}}}),!e&&h(W,{children:[c(E,{title:"Favorite Contacts",variables:{where:{id:{_in:t.values}}}}),c(E,{title:"Contacts",variables:{where:{id:{_nin:t.values}}}})]})]})}const xt={root:m({padding:16,display:"flex",flexDirection:"column",gap:16})};var N={},St=w;Object.defineProperty(N,"__esModule",{value:!0});var se=N.default=void 0,wt=St(S()),yt=v,$t=(0,wt.default)((0,yt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");se=N.default=$t;function Rt(){return c(Se,{position:"sticky",children:h(xe,{children:[c(g,{variant:"h1",css:Et.title,children:"Contacts"}),h($,{component:q,to:"/add","aria-label":"Add new contact",color:"inherit",children:[c(se,{}),c(g,{children:"Add New"})]})]})})}const Et={title:m({flexGrow:1})};var V={},Mt=w;Object.defineProperty(V,"__esModule",{value:!0});var ie=V.default=void 0,Lt=Mt(S()),jt=v,At=(0,Lt.default)((0,jt.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");ie=V.default=At;function It(){const e=Ge(),[t,n]=l.useState(""),o=ft(t,100);return l.useEffect(()=>e(o),[o]),c("div",{css:Tt.root,children:c(we,{size:"small",placeholder:"Search...",onChange:i=>n(i.target.value),startAdornment:c(Je,{position:"start",children:c(ie,{})})})})}const Tt={root:m({display:"flex",flexDirection:"column",padding:16})};function kt(){return c(qe,{children:h(mt,{children:[c(Rt,{}),c(It,{}),c(bt,{})]})})}export{kt as Component};
